<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>BaseLog Safari PWAã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Kaku Gothic ProN', sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 { color: #2e7d46; }
    .icon-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .icon-item {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
    }
    .icon-preview {
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .download-btn {
      display: inline-block;
      padding: 8px 16px;
      background: #2e7d46;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-size: 14px;
      margin-top: 10px;
    }
    .download-btn:hover {
      background: #236135;
    }
    .instructions {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
    code {
      background: #f1f1f1;
      padding: 2px 5px;
      border-radius: 3px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>âš¾ BaseLog Safari PWAã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆãƒ„ãƒ¼ãƒ«</h1>
  
  <div class="instructions">
    <h3>ğŸ“± Safari PWAå¯¾å¿œæ‰‹é †:</h3>
    <ol>
      <li>ä¸‹è¨˜ã®å„ã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ <code>public/</code> ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜</li>
      <li>manifest.jsonã‚’æ›´æ–°ï¼ˆä¸‹è¨˜ã®è¨­å®šã‚’ã‚³ãƒ”ãƒ¼ï¼‰</li>
      <li>index.htmlã« <code>&lt;link rel="apple-touch-icon" href="/apple-touch-icon.png"&gt;</code> ã‚’è¿½åŠ </li>
      <li>ãƒ“ãƒ«ãƒ‰ã—ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤</li>
    </ol>
  </div>
  
  <button class="download-btn" onclick="downloadAll()" style="margin-bottom: 20px;">
    å…¨ã¦ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  </button>
  
  <div id="icons" class="icon-container"></div>
  
  <h3>manifest.json æ›´æ–°å†…å®¹:</h3>
  <pre id="manifest-config" style="background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;">
ç”Ÿæˆä¸­...
  </pre>
  
  <script>
    // Safari PWAã«å¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºï¼ˆå„ªå…ˆé †ä½é †ï¼‰
    const iconConfigs = [
      { size: 192, filename: 'icon-192x192.png', purpose: 'any' },
      { size: 512, filename: 'icon-512x512.png', purpose: 'any' },
      { size: 180, filename: 'apple-touch-icon.png', purpose: 'any' },
      { size: 167, filename: 'icon-167x167.png', purpose: 'any' },
      { size: 152, filename: 'icon-152x152.png', purpose: 'any' },
      { size: 144, filename: 'icon-144x144.png', purpose: 'any' },
      { size: 120, filename: 'icon-120x120.png', purpose: 'any' },
      { size: 96, filename: 'icon-96x96.png', purpose: 'any' },
      { size: 72, filename: 'icon-72x72.png', purpose: 'any' },
      { size: 48, filename: 'icon-48x48.png', purpose: 'any' },
      { size: 192, filename: 'icon-maskable-192x192.png', purpose: 'maskable' },
      { size: 512, filename: 'icon-maskable-512x512.png', purpose: 'maskable' }
    ];
    
    const generatedLinks = [];
    
    function createIcon(size, purpose = 'any') {
      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');
      
      if (purpose === 'maskable') {
        // Maskable icon: ã‚ˆã‚Šå¤§ããªå®‰å…¨é ˜åŸŸã‚’ç¢ºä¿
        ctx.fillStyle = '#2e7d46';
        ctx.fillRect(0, 0, size, size);
        
        // ä¸­å¤®ã«å°ã•ã‚ã®é‡çƒãƒœãƒ¼ãƒ«
        const ballSize = size * 0.5;
        const ballX = size * 0.5;
        const ballY = size * 0.5;
        
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.arc(ballX, ballY, ballSize * 0.4, 0, Math.PI * 2);
        ctx.fill();
        
        // ç¸«ã„ç›®
        ctx.strokeStyle = '#ff4444';
        ctx.lineWidth = size * 0.02;
        ctx.beginPath();
        ctx.arc(ballX - ballSize * 0.15, ballY, ballSize * 0.3, -Math.PI * 0.7, Math.PI * 0.7);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(ballX + ballSize * 0.15, ballY, ballSize * 0.3, Math.PI * 0.3, Math.PI * 1.7);
        ctx.stroke();
        
      } else {
        // é€šå¸¸ã®ã‚¢ã‚¤ã‚³ãƒ³
        // èƒŒæ™¯ï¼ˆç·‘ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
        const gradient = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
        gradient.addColorStop(0, '#3a9855');
        gradient.addColorStop(1, '#2e7d46');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, size, size);
        
        // é‡çƒãƒœãƒ¼ãƒ«
        const ballX = size * 0.39;
        const ballY = size * 0.5;
        const ballRadius = size * 0.176;
        
        // ãƒœãƒ¼ãƒ«ã®å½±
        ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
        ctx.beginPath();
        ctx.ellipse(ballX + 3, ballY + 5, ballRadius, ballRadius * 0.9, 0, 0, Math.PI * 2);
        ctx.fill();
        
        // ãƒœãƒ¼ãƒ«æœ¬ä½“
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = size * 0.012;
        ctx.stroke();
        
        // ç¸«ã„ç›®
        ctx.strokeStyle = '#ff4444';
        ctx.lineWidth = size * 0.01;
        
        // å·¦å´ã®ç¸«ã„ç›®
        ctx.beginPath();
        ctx.moveTo(ballX - ballRadius * 0.6, ballY - ballRadius * 0.8);
        for (let i = 0; i < 5; i++) {
          const y = ballY - ballRadius * 0.8 + (i * ballRadius * 0.4);
          ctx.quadraticCurveTo(
            ballX - ballRadius * 0.4, y + ballRadius * 0.1,
            ballX - ballRadius * 0.6, y + ballRadius * 0.2
          );
        }
        ctx.stroke();
        
        // å³å´ã®ç¸«ã„ç›®
        ctx.beginPath();
        ctx.moveTo(ballX + ballRadius * 0.6, ballY - ballRadius * 0.8);
        for (let i = 0; i < 5; i++) {
          const y = ballY - ballRadius * 0.8 + (i * ballRadius * 0.4);
          ctx.quadraticCurveTo(
            ballX + ballRadius * 0.4, y + ballRadius * 0.1,
            ballX + ballRadius * 0.6, y + ballRadius * 0.2
          );
        }
        ctx.stroke();
        
        // BBãƒ†ã‚­ã‚¹ãƒˆ
        ctx.fillStyle = 'white';
        ctx.font = `bold ${size * 0.176}px Arial Black, sans-serif`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
        ctx.shadowBlur = 4;
        ctx.fillText('BB', size * 0.68, size * 0.74);
      }
      
      return canvas;
    }
    
    // ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
    iconConfigs.forEach(({ size, filename, purpose }) => {
      const container = document.getElementById('icons');
      const iconItem = document.createElement('div');
      iconItem.className = 'icon-item';
      
      const canvas = createIcon(size, purpose);
      
      // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
      const preview = document.createElement('img');
      preview.src = canvas.toDataURL();
      preview.className = 'icon-preview';
      preview.style.width = Math.min(size, 128) + 'px';
      preview.style.height = Math.min(size, 128) + 'px';
      
      // æƒ…å ±
      const info = document.createElement('div');
      info.innerHTML = `
        <strong>${filename}</strong><br>
        ${size}Ã—${size}px<br>
        <small>${purpose === 'maskable' ? 'ãƒã‚¹ã‚«ãƒ–ãƒ«' : 'é€šå¸¸'}</small>
      `;
      
      // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯
      canvas.toBlob(blob => {
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        link.className = 'download-btn';
        link.textContent = 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰';
        generatedLinks.push({ link, filename });
        
        iconItem.appendChild(preview);
        iconItem.appendChild(info);
        iconItem.appendChild(link);
        container.appendChild(iconItem);
      });
    });
    
    // manifest.jsonè¨­å®šã‚’è¡¨ç¤º
    const manifestConfig = {
      icons: iconConfigs.map(({ size, filename, purpose }) => ({
        src: `/${filename}`,
        sizes: `${size}x${size}`,
        type: "image/png",
        purpose: purpose
      }))
    };
    
    document.getElementById('manifest-config').textContent = JSON.stringify(manifestConfig, null, 2);
    
    // å…¨ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    function downloadAll() {
      generatedLinks.forEach(({ link }, index) => {
        setTimeout(() => link.click(), index * 100);
      });
    }
  </script>
</body>
</html>